

# **Dynamic Busan ìˆ™ë°•ì—…ì†Œ ê²€ìƒ‰ ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜**

## **"í¸ì˜ì— ë§ê²Œ ê²€ìƒ‰í•˜ê³ , ì§€ë„ì—ì„œ í™•ì¸í•˜ì!"**

[ì›¹ ì‚¬ì´íŠ¸](https://dataanlysic-seon.streamlit.app/)
![image](https://github.com/sunk-dev/dataanlysic/assets/103514806/6817dfff-7aa6-4b45-a60b-2b18cb680525)


- ì´ìš© ë°ì´í„° ìë£Œ
  
[ë¶€ì‚°ê´€ê´‘ê³µì‚¬_ë¶€ì‚°ì§€ì—­ ìˆ™ë°•ë¶„ì•¼ ì—…ì²´_20220101](https://www.data.go.kr/data/15096728/fileData.do)

### ê°„ëµ ì„¤ëª…

- pythonê³¼ streamlit(ë°ì´í„° ê¸°ë°˜ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“œëŠ” ë„êµ¬) ì„ ì´ìš©í•˜ì—¬ í¸ì˜ ì‹œì„¤, ì‹œë„ë³„ ë¶€ì‚° ìˆ™ë°•ì—…ì†Œ ì¡°íšŒ ì›¹ì‚¬ì´íŠ¸ ê°œë°œ

---

**1. ì†Œê°œ**

- ë¶€ì‚° ìˆ™ë°•ì—…ì†Œ ë°ì´í„°ë¥¼ í™œìš©í•œ  ê²€ìƒ‰ ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì†Œê°œ

---

**2. ì–´í”Œë¦¬ì¼€ì´ì…˜ ê¸°ëŠ¥**

- **ë‹¤ì–‘í•œ í¸ì˜ì‹œì„¤ ì„ íƒ ê°€ëŠ¥**
    - íœ ì²´ì–´ ì´ë™ ê°€ëŠ¥, ì ìë„ë¡œ ì´ìš© ê°€ëŠ¥ ë“±
- **ì§€ë„ ìƒì—ì„œ ê²€ìƒ‰ ì¡°ê±´ì— ë§ëŠ” ìˆ™ë°•ì—…ì†Œ í‘œì‹œ**
    - ì„ íƒí•œ ì¡°ê±´ì— ë”°ë¼ ì§€ë„ ìƒì— ë§ˆì»¤ë¡œ í‘œì‹œ
- **ì‹œêµ°êµ¬ ë° ìë©´ë™ë³„ ê²€ìƒ‰ ì¡°ê±´ ì§€ì›**
    - ì‚¬ì´ë“œë°”ì—ì„œ ì‹œêµ°êµ¬ëª… ë° ìë©´ë™ëª… ì„ íƒ ê°€ëŠ¥
- **ì—‘ì…€ ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥**
    - í˜„ì¬ í•„í„°ë§ëœ ê²°ê³¼ë¥¼ ì—‘ì…€ íŒŒì¼ë¡œ ë‹¤ìš´ë¡œë“œ

---

**3. ì½”ë“œ ë™ì‘ ê³¼ì •**

- **ë°ì´í„° ë¡œë“œ ë° ì´ˆê¸° ì„¤ì •**
    - Plotly, Pandas, Streamlit ë“±ì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©
- **ê²€ìƒ‰ ì¡°ê±´ ì„¤ì •**
    - í¸ì˜ì‹œì„¤ ë° ì§€ì—­ ì„ íƒì„ ìœ„í•œ ì‚¬ì´ë“œë°” ì œê³µ
- **ë°ì´í„° í•„í„°ë§**
    - ì„ íƒí•œ ì¡°ê±´ì— ë”°ë¼ ë°ì´í„°ë¥¼ í•„í„°ë§í•˜ì—¬ ì§€ë„ ë° ê²°ê³¼ì— ë°˜ì˜
- **ì§€ë„ í‘œì‹œ**
    - Folium ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ìˆ™ë°•ì—…ì†Œ ìœ„ì¹˜ë¥¼ ì§€ë„ ìƒì— í‘œì‹œ
- **ê²°ê³¼ í‘œì‹œ ë° ë‹¤ìš´ë¡œë“œ**
    - í•„í„°ë§ëœ ê²°ê³¼ë¥¼ í™”ë©´ì— í‘œì‹œí•˜ê³ , ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ìœ¼ë¡œ ì—‘ì…€ íŒŒì¼

### ìƒì„¸ì„¤ëª…

### 1. ë°ì´í„° ì „ì²˜ë¦¬

### **1. í™˜ê²½ ì„¤ì • ë° ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°**

```python
pythonCopy code
# í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„í¬íŠ¸
import pandas as pd
import koreanize_matplotlib
import matplotlib.pyplot as plt
import seaborn as sns
from IPython.display import set_matplotlib_formats

# Colabì—ì„œ ì‚¬ìš©í•˜ëŠ” í•œê¸€ í°íŠ¸ ì„¤ì •
plt.rc('font', family='Malgun Gothic')
plt.rc('axes', unicode_minus=False)
set_matplotlib_formats('retina')

# ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
df = pd.read_csv("/content/drive/MyDrive/Colab Notebooks/BusanHotel.csv", encoding='cp949')
df1 = pd.read_csv("/content/drive/MyDrive/Colab Notebooks/koreaLibrary.csv", encoding='cp949')

```

### **2. ë°ì´í„° ì „ì²˜ë¦¬**

```python
pythonCopy code
# í•„ìš” ì—†ëŠ” ì—´ ì‚­ì œ
clean_data = df.drop(['í•„ì§€ê³ ìœ ë²ˆí˜¸', 'ë²•ì •ë™ì½”ë“œ', 'í–‰ì •ë™ì½”ë“œ', 'ë„ë¡œëª…ì½”ë“œ', 'ë“±ë¡ì¼ì'], axis=1)

# 'ì¹´í…Œê³ ë¦¬ëª…'ì´ 'ë¬¸í™”ê´€ê´‘/ëª…ì†Œ'ì¸ í–‰ ì œê±°
clean_data = clean_data[clean_data['ì¹´í…Œê³ ë¦¬ëª…'] != 'ë¬¸í™”ê´€ê´‘/ëª…ì†Œ']

# 'íì—…ì—¬ë¶€'ê°€ 'Y'ì¸ í–‰ ì œê±°
clean_data = clean_data[clean_data['íì—…ì—¬ë¶€'] != 'Y']

# ê²°ì¸¡ê°’ ì²˜ë¦¬
clean_data['ì£¼ì°¨ê°€ëŠ¥ì—¬ë¶€'] = clean_data['ì£¼ì°¨ê°€ëŠ¥ì—¬ë¶€'].fillna('N')
clean_data['í™”ì¥ì‹¤ìœ ë¬´'] = clean_data['í™”ì¥ì‹¤ìœ ë¬´'].fillna('N')
# ... (ì´í•˜ ìƒëµ)

```

### **3. Foliumì„ ì‚¬ìš©í•œ ì§€ë„ ì‹œê°í™”**

```python
pythonCopy code
import folium

# ë°ì´í„°ì˜ ìœ„ë„, ê²½ë„ í‰ê· ê°’ì„ ì¤‘ì‹¬ìœ¼ë¡œ ì§€ë„ ìƒì„±
map = folium.Map(location=[clean_data['ìœ„ë„'].mean(), clean_data['ê²½ë„'].mean()], zoom_start=7)

# ì§€ë„ì— ë§ˆì»¤ ì¶”ê°€
for n in clean_data.index:
    name = clean_data.loc[n, 'ì—…ì²´ëª…']
    address = clean_data.loc[n, 'ë„ë¡œëª…']
    popup = f"{name}-{address}"
    location = [clean_data.loc[n, 'ìœ„ë„'], clean_data.loc[n, 'ê²½ë„']]
    folium.Marker(
        location=location,
        popup=popup,
        icon=folium.Icon(color='red', icon='plus', prefix='fa')
    ).add_to(map)

# ì§€ë„ ì¶œë ¥
map

```

### **4. ë°ì´í„° ë¶„ì„ ë° ì‹œê°í™”**

```python
pythonCopy code
# ì‹œêµ°êµ¬ëª… ë³„ ìë©´ë™ ëª… ë¶„ë¥˜ ë° ì¶œë ¥
table = pd.pivot_table(clean_data, index=['ì‹œêµ°êµ¬ëª…'], values=['ìë©´ë™ëª…'], aggfunc='count')
print(table)

```

### **5. Excel íŒŒì¼ë¡œ ë°ì´í„° ì €ì¥**

```python
pythonCopy code
# ì—‘ì…€ì— ì €ì¥ë  ë°ì´í„° ê°€ê³µ
adress_roadname = clean_data['ë„ë¡œëª…'] + clean_data['ë„ë¡œëª…ìƒì„¸']
adress = clean_data['ì‹œë„ëª…'] + clean_data['ì‹œêµ°êµ¬ëª…'] + clean_data['ìë©´ë™ëª…'] + clean_data['ë²ˆì§€']

clean_data['ì¼ë°˜ì£¼ì†Œ'] = adress
clean_data['ë„ë¡œëª…ì£¼ì†Œ'] = adress_roadname

down_data = clean_data[['ì—…ì²´ëª…', 'ì¼ë°˜ì£¼ì†Œ', 'ë„ë¡œëª…ì£¼ì†Œ', 'ì „í™”ë²ˆí˜¸', 'í™ˆí˜ì´ì§€ì£¼ì†Œ']]
down_data.fillna('', inplace=True)

```

ìœ„ ì½”ë“œëŠ” ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ê³  ì „ì²˜ë¦¬í•œ ë’¤, ì§€ë„ ì‹œê°í™”ì™€ ê°„ë‹¨í•œ ë°ì´í„° ë¶„ì„ì„ ìˆ˜í–‰í•˜ë©° ìµœì¢…ì ìœ¼ë¡œ Excel íŒŒì¼ë¡œ ì €ì¥í•˜ëŠ” ê³¼ì •ì„ ë‹´ê³  ìˆìŠµë‹ˆë‹¤. ì½”ë“œì˜ ì£¼ì„ê³¼ ì¶œë ¥ ê²°ê³¼ë¥¼ í†µí•´ ê° ë‹¨ê³„ì—ì„œ ì–´ë–¤ ì‘ì—…ì´ ìˆ˜í–‰ë˜ê³  ìˆëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### **6. ë°ì´í„° ì „ì²˜ë¦¬**

```python
pythonCopy code
# 'ë“±ë¡ì¼ì' ì—´ ì‚­ì œ
clean_data = clean_data.drop(['ë“±ë¡ì¼ì'], axis=1)

```

- 'ë“±ë¡ì¼ì' ì—´ì„ ì‚­ì œí•˜ëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤. ì´ ì—´ì€ ë°ì´í„°ì—ì„œ ì œê±°ë˜ì–´ ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•Šê²Œ ë©ë‹ˆë‹¤.

### **7. Excel íŒŒì¼ë¡œ ë°ì´í„° ì €ì¥**

```python
pythonCopy code
# 'ì¼ë°˜ì£¼ì†Œ'ì™€ 'ë„ë¡œëª…ì£¼ì†Œ' ì—´ ì¶”ê°€ ë° ê²°ì¸¡ê°’ ì²˜ë¦¬
adress_roadname = clean_data['ë„ë¡œëª…'] + clean_data['ë„ë¡œëª…ìƒì„¸']
adress = clean_data['ì‹œë„ëª…'] + clean_data['ì‹œêµ°êµ¬ëª…'] + clean_data['ìë©´ë™ëª…'] + clean_data['ë²ˆì§€']

clean_data['ì¼ë°˜ì£¼ì†Œ'] = adress
clean_data['ë„ë¡œëª…ì£¼ì†Œ'] = adress_roadname

# 'ì—…ì²´ëª…', 'ì¼ë°˜ì£¼ì†Œ', 'ë„ë¡œëª…ì£¼ì†Œ', 'ì „í™”ë²ˆí˜¸', 'í™ˆí˜ì´ì§€ì£¼ì†Œ' ì—´ ì„ íƒ
down_data = clean_data[['ì—…ì²´ëª…', 'ì¼ë°˜ì£¼ì†Œ', 'ë„ë¡œëª…ì£¼ì†Œ', 'ì „í™”ë²ˆí˜¸', 'í™ˆí˜ì´ì§€ì£¼ì†Œ']]
down_data.fillna('', inplace=True)

```

- 'ì¼ë°˜ì£¼ì†Œ' ë° 'ë„ë¡œëª…ì£¼ì†Œ' ì—´ì„ ìƒˆë¡œ ë§Œë“¤ê³ , ê²°ì¸¡ê°’ì„ ì²˜ë¦¬í•˜ëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤.
- ìµœì¢…ì ìœ¼ë¡œ 'ì—…ì²´ëª…', 'ì¼ë°˜ì£¼ì†Œ', 'ë„ë¡œëª…ì£¼ì†Œ', 'ì „í™”ë²ˆí˜¸', 'í™ˆí˜ì´ì§€ì£¼ì†Œ' ì—´ì„ ì„ íƒí•˜ì—¬ ë°ì´í„°í”„ë ˆì„ì„ ë§Œë“­ë‹ˆë‹¤.

ì´ ë¶€ë¶„ì—ì„œëŠ” ì—´ì„ ì¡°ì‘í•˜ì—¬ ì£¼ì†Œ ê´€ë ¨ ì •ë³´ë¥¼ ìƒˆë¡œìš´ ì—´ë¡œ ì¶”ê°€í•˜ê³ , í•„ìš”í•œ ì—´ë§Œ ì„ íƒí•˜ì—¬ ìµœì¢… ë°ì´í„°ë¥¼ ì •ë¦¬í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

### 2. streamlit êµ¬ì¶•

### **1. ë¼ì´ë¸ŒëŸ¬ë¦¬ ë° ë°ì´í„° ë¡œë“œ**

```python
pythonCopy code
import plotly.graph_objects as go
import pandas as pd
import numpy as np
import streamlit as st
import yfinance as yf
import matplotlib.pyplot as plt
import folium
import openpyxl
from pyxlsb import open_workbook as open_xlsb
from io import BytesIO
from xlsxwriter import Workbook

```

- **plotly, pandas, streamlit, folium ë“±ì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„° ì‹œê°í™” ë° ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œì— í•„ìš”í•œ ëª¨ë“ˆ ë¡œë“œ**

---

### **2. Streamlit ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬ì„±**

```python
pythonCopy code
st.title('Dynamic Busan â˜€ï¸')
st.subheader('ì›í•˜ëŠ” ì¡°ê±´ì˜ ë¶€ì‚° ìˆ™ë°•ì—…ì†Œë¥¼ ì‰½ê²Œ ê²€ìƒ‰í•´ë´ìš”! ğŸ˜', anchor=None, help=None, divider=False)

```

- **ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì œëª©ê³¼ ë¶€ì œ ì„¤ì •**

---

### **3. ë°ì´í„° ë¡œë“œ ë° í•„í„°ë§**

```python
pythonCopy code
data = pd.read_csv('./BusanHotelFirst.csv')
filter_data = data

```

- **CSV íŒŒì¼ì—ì„œ ë¶€ì‚° ìˆ™ë°•ì—…ì†Œ ë°ì´í„° ë¡œë“œ**
- **`filter_data` ë³€ìˆ˜ì— ì´ˆê¸° ë°ì´í„° ì„¤ì •**

---

### **4. ê²€ìƒ‰ ì¡°ê±´ ì„¤ì •**

```python
pythonCopy code
options = st.sidebar.multiselect(
    'í¸ì˜ì‹œì„¤',
    ['íœ ì²´ì–´ ì´ë™ ê°€ëŠ¥', 'ì ìë„ë¡œì´ìš©ê°€ëŠ¥', 'ë¬¼í’ˆë³´ê´€í•¨ ì´ìš©ê°€ëŠ¥', 'ìˆ˜ìœ ì‹¤ ì´ìš© ê°€ëŠ¥'])

```

- **`st.sidebar.multiselect`ì„ ì‚¬ìš©í•˜ì—¬ í¸ì˜ì‹œì„¤ì— ëŒ€í•œ ë‹¤ì¤‘ ì„ íƒ ê¸°ëŠ¥ êµ¬í˜„**

---

### **5. ê²€ìƒ‰ ì¡°ê±´ì— ë”°ë¥¸ ë°ì´í„° í•„í„°ë§**

```python
pythonCopy code
if (options is not None):
    for i in options:
        col = options_value[i]
        filter_data = filter_data[filter_data[col] == 'Y']

```

- **ì„ íƒí•œ í¸ì˜ì‹œì„¤ì— ë”°ë¼ ë°ì´í„°ë¥¼ í•„í„°ë§**

---

### **6. ì§€ë„ ìƒì— ìˆ™ë°•ì—…ì†Œ í‘œì‹œ**

```python
pythonCopy code
map = folium.Map(location=[filter_data['ìœ„ë„'].mean(), filter_data['ê²½ë„'].mean()], zoom_start=10)
for n in filter_data.index:
    name = filter_data.loc[n, 'ì—…ì²´ëª…']
    address = filter_data.loc[n, 'ë„ë¡œëª…']

    popup = folium.Popup(f'<i>{name}-{address}</i>', max_width=600, max_height=600)
    location = [filter_data.loc[n, 'ìœ„ë„'], filter_data.loc[n, 'ê²½ë„']]
    folium.Marker(
        location=location,
        popup=popup,
        icon=folium.Icon(color='red', icon='plus', prefix='fa')
    ).add_to(map)

```

- **Foliumì„ ì‚¬ìš©í•˜ì—¬ ì§€ë„ë¥¼ ìƒì„±í•˜ê³ , í•„í„°ë§ëœ ë°ì´í„°ì— ëŒ€í•œ ë§ˆì»¤ í‘œì‹œ**

---

### **7. ê²°ê³¼ ë° ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥**

```python
pythonCopy code
df_xlsx = to_excel(process_down_data(filter_data))
st.sidebar.download_button(label='ğŸ“¥ Download Current Result',
                            data=df_xlsx,
                            file_name='df_test.xlsx')

```
